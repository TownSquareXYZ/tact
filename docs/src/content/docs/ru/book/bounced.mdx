---
title: Отклоненные сообщения
description: Когда контракт отправляет сообщение с флагом bounce, установленным на true, то, если сообщение не было обработано должным образом, оно вернется обратно отправителю
---

Когда контракт отправляет сообщение с флагом `bounce`, установленным на `true{:tact}`, то, если сообщение не было обработано должным образом, оно вернется обратно отправителю. Это полезно, когда вы хотите убедиться, что сообщение было обработано должным образом, и если нет — отменить изменения.

## Предостережения

В настоящее время возврат сообщений в TON содержит только 224 пригодных для использования бита данных в теле сообщения и не имеет никаких ссылок. Это означает, что вы не можете восстановить большую часть данных из возвращенного сообщения. Это ограничение блокчейна TON, которое будет исправлено в будущем. Tact помогает вам проверить, соответствует ли ваше сообщение ограничению, и в случае, если это не так, предлагает использовать специальный конструктор типа `bounced<T>{:tact}` для получателя возвращенного сообщения, который создаст частичное представление сообщения, которое соответствует требуемым ограничениям.

## Получатель возвращенного сообщения

:::caution

  Возвращенные текстовые сообщения пока не поддерживаются.

:::

Чтобы получить возвращенное сообщение, определите [функцию получателя](/book/contracts#receiver-functions) `bounced(){:tact}` в вашем [контракте](/book/contracts) или [признаке](/book/types#traits):

```tact {2-4}
contract MyContract {
    bounced(msg: bounced<MyMessage>) {
        // ...
    }
}
```

Чтобы вручную обрабатывать возвращенные сообщения, вы можете использовать резервное определение, которое обрабатывает необработанный [`Slice{:tact}`](/book/cells#slices) напрямую. Обратите внимание, что такой получатель получит **все** возвращенные сообщения, созданные вашим контрактом:

```tact /rawMsg: Slice/
contract MyContract {
    bounced(rawMsg: Slice) {
        // ...
    }
}
```
