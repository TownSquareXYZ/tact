---
title: Режим сообщений
description: Сообщения отправляются с параметром режима структуры SendParameter. Это значение Int, которое объединяет базовые режимы и необязательные флаги, которые также являются значениями Int
---

import { Badge } from '@astrojs/starlight/components';

Как уже упоминалось ранее, сообщения отправляются с параметром `mode` структуры `SendParameters{:tact}`. Это значение [`Int{:tact}`][int], которое объединяет базовые режимы и необязательные флаги, которые также являются значениями [`Int{:tact}`][int].

Можно использовать необработанные значения [`Int{:tact}`][int] и вручную указывать их для `mode`, но для вашего удобства есть набор констант, которые вы можете использовать для простого построения составного `mode`. Ознакомьтесь с приведенными ниже таблицами для получения дополнительной информации о базовых режимах и дополнительных флагах.

## Базовые режимы

| Значение Mode | Имя константы                                                                                     | Описание                                                                                                                |
| ------------: | :------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------- |
|    $0$        | <Badge text="Начиная с версии Tact 1.6 (еще не выпущена)" option="tip"/> `SendDefaultMode{:tact}` | Обычное сообщение (по умолчанию).                                                                                       |
|    $64$       | `SendRemainingValue{:tact}`.                                                                      | Перенести все оставшееся значение входящего сообщения в дополнение к значению, изначально указанному в новом сообщении. |
|    $128$      | `SendRemainingBalance{:tact}`                                                                     | Перенести весь оставшийся баланс текущего смарт-контракта вместо значения, изначально указанного в сообщении.           |

## Необязательные флаги

| Значение флага | Имя константы                   | Описание                                                                                                                                                                    |
| -------------: | :------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|     $+1$       | `SendPayGasSeparately{:tact}`   | Оплачивать сборы за пересылку отдельно от стоимости сообщения.                                                                                                              |
|     $+2$       | `SendIgnoreErrors{:tact}`       | Игнорировать любые ошибки, возникающие при обработке этого сообщения на этапе действия.                                                                                     |
|     $+16$      | `SendBounceIfActionFail{:tact}` | Отклонить транзакцию в случае любых ошибок на этапе действия. Не имеет эффекта, если используется флаг $+2$, `SendIgnoreErrors{:tact}`. $+32$ | `SendDestroyIfZero{:tact}`. |
|     $+32$      | `SendDestroyIfZero{:tact}`      | Текущий счет должен быть уничтожен, если его итоговый баланс равен нулю (часто используется с режимом $128$, `SendRemainingBalance{:tact}`.                                 |

## Комбинирование режимов и флагов

Чтобы получить значение [`Int{:tact}`][int] для поля `mode` в `SendParameters{:tact}`, вам просто нужно объединить базовые режимы с необязательными флагами, применив операцию [побитовое ИЛИ](/book/operators#binary-bitwise-or).

Например, если вы хотите отправить обычное сообщение и отдельно оплатить комиссию за перевод, используйте режим $0$ (по умолчанию) и флаг $+1$, чтобы получить `mode` $= 1$, что эквивалентно использованию константы `SendPayGasSeparately{:tact}`.

В качестве альтернативы, если вы хотите отправить весь баланс контракта и немедленно его уничтожить, используйте режим $128$ и флаг $+32$, чтобы получить `mode` $= 160$, что эквивалентно `SendRemainingBalance | SendDestroyIfZero{:tact}`.

Вот как выглядит последний пример в коде:

```tact
let to: Address = address("...");
let value: Int = ton("1");
send(SendParameters{
    to: to,
    value: value,
    mode: SendRemainingBalance | SendDestroyIfZero,
    body: "Hello, World!".asComment(),
});
```

:::caution

  Обратите внимание, что хотя добавление базовых режимов ([`+{:tact}`](/book/operators#binary-add)) вместе с необязательными флагами возможно, это не рекомендуется из-за возможности избыточных значений. Вместо этого используйте побитовое ИЛИ ([`|{:tact}`](/book/operators#binary-bitwise-or)), поскольку оно предназначено для работы с такими флагами и битовыми манипуляциям `mode`.

:::

:::note

  Также обратите внимание, что может быть только один [базовый режим](#base-modes), но количество [необязательных флагов](#optional-flags) может варьироваться: вы можете использовать их все, ни одного или некоторые.

:::

[int]: /book/integers
